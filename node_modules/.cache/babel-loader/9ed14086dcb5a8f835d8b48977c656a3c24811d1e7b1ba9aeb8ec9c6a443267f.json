{"ast":null,"code":"import _slicedToArray from\"/Users/vb/comments/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import s from'./CommentsList.module.css';import useLocalState from'../../hooks';import Comments from'../Comments/Comments';import{customAlphabet}from'nanoid';import{HexColorPicker}from'react-colorful';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function CommentsList(){var _activeItem$;var _useLocalState=useLocalState('items',[]),_useLocalState2=_slicedToArray(_useLocalState,2),items=_useLocalState2[0],setItems=_useLocalState2[1];var _useLocalState3=useLocalState('activeItem',[]),_useLocalState4=_slicedToArray(_useLocalState3,2),activeItem=_useLocalState4[0],setActiveItem=_useLocalState4[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),colorPickerVisible=_useState4[0],setColorPickerVisible=_useState4[1];var _useState5=useState('#000000'),_useState6=_slicedToArray(_useState5,2),color=_useState6[0],setColor=_useState6[1];var nanoid=customAlphabet('1234567890',8);var idNano=nanoid();var handleChange=function handleChange(event){setName(event.target.value);};var handleSubmit=function handleSubmit(event){event.preventDefault();var updatedItems=items.map(function(i){if(i.id===activeItem[0].id){i.comments.push([activeItem[0].id,name,idNano,color]);}return i;});setItems(updatedItems);setName('');setColor('#000000');var active=items.filter(function(e){return e.id===activeItem[0].id;});setActiveItem(active);};var handleColorChange=function handleColorChange(){setColorPickerVisible(!colorPickerVisible);};return/*#__PURE__*/_jsxs(\"div\",{className:s.commentsBlok,children:[activeItem&&activeItem[0]&&activeItem[0].comments?/*#__PURE__*/_jsxs(\"h2\",{className:s.commentsName,children:[\"Comments\",\" #\".concat(activeItem[0].id)]}):null,/*#__PURE__*/_jsx(\"ul\",{className:s.listCommentsName,children:activeItem.length>0?(_activeItem$=activeItem[0])!==null&&_activeItem$!==void 0&&_activeItem$.comments?activeItem[0].comments.map(function(e){return/*#__PURE__*/_jsx(Comments,{commentName:e[1],color:e[3]},e[2]);}):/*#__PURE__*/_jsx(\"p\",{children:\"No comments available\"}):/*#__PURE__*/_jsx(\"p\",{children:\"No comments available\"})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:s.commentsBlokElem,children:[/*#__PURE__*/_jsx(\"div\",{className:s.colorInputBlock,style:{backgroundColor:color},onClick:handleColorChange}),colorPickerVisible&&/*#__PURE__*/_jsx(HexColorPicker,{className:s.colorPicker,color:color,onChange:setColor,style:{position:'absolute',zIndex:1}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Type comment here...\",className:s.nameTextarea,name:\"name\",title:\"Place for comments\",required:true,value:name,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:s.commentsAddButton,children:\"Add new\"})]})})]});}","map":{"version":3,"names":["React","useState","s","useLocalState","Comments","customAlphabet","HexColorPicker","jsxs","_jsxs","jsx","_jsx","CommentsList","_activeItem$","_useLocalState","_useLocalState2","_slicedToArray","items","setItems","_useLocalState3","_useLocalState4","activeItem","setActiveItem","_useState","_useState2","name","setName","_useState3","_useState4","colorPickerVisible","setColorPickerVisible","_useState5","_useState6","color","setColor","nanoid","idNano","handleChange","event","target","value","handleSubmit","preventDefault","updatedItems","map","i","id","comments","push","active","filter","e","handleColorChange","className","commentsBlok","children","commentsName","concat","listCommentsName","length","commentName","onSubmit","commentsBlokElem","colorInputBlock","style","backgroundColor","onClick","colorPicker","onChange","position","zIndex","placeholder","nameTextarea","title","required","type","commentsAddButton"],"sources":["/Users/vb/comments/src/components/CommentsList/CommentsList.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport s from './CommentsList.module.css';\nimport useLocalState from '../../hooks';\nimport Comments from '../Comments/Comments';\nimport { customAlphabet } from 'nanoid';\nimport { HexColorPicker } from 'react-colorful';\n\ntype CommentTuple = [number, string, string, string];\n\nexport default function CommentsList() {\n  const [items, setItems] = useLocalState('items', []);\n\n  const [activeItem, setActiveItem] = useLocalState('activeItem', []);\n  const [name, setName] = useState('');\n\n  const [colorPickerVisible, setColorPickerVisible] = useState(false);\n  const [color, setColor] = useState('#000000');\n\n  const nanoid = customAlphabet('1234567890', 8);\n  const idNano = nanoid();\n\n  const handleChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setName(event.target.value);\n  };\n\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const updatedItems = items.map(\n      (i: { comments: CommentTuple[]; id: number }) => {\n        if (i.id === activeItem[0].id) {\n          i.comments.push([activeItem[0].id, name, idNano, color]);\n        }\n        return i;\n      }\n    );\n    setItems(updatedItems);\n    setName('');\n    setColor('#000000');\n\n    const active = items.filter(\n      (e: { id: string }) => e.id === activeItem[0].id\n    );\n    setActiveItem(active);\n  };\n\n  const handleColorChange = () => {\n    setColorPickerVisible(!colorPickerVisible);\n  };\n\n  return (\n    <div className={s.commentsBlok}>\n      {activeItem && activeItem[0] && activeItem[0].comments ? (\n        <h2 className={s.commentsName}>Comments{` #${activeItem[0].id}`}</h2>\n      ) : null}\n      <ul className={s.listCommentsName}>\n        {activeItem.length > 0 ? (\n          activeItem[0]?.comments ? (\n            activeItem[0].comments.map((e: CommentTuple) => (\n              <Comments commentName={e[1]} color={e[3]} key={e[2]} />\n            ))\n          ) : (\n            <p>No comments available</p>\n          )\n        ) : (\n          <p>No comments available</p>\n        )}\n      </ul>\n      <form onSubmit={handleSubmit}>\n        <div className={s.commentsBlokElem}>\n          <div\n            className={s.colorInputBlock}\n            style={{\n              backgroundColor: color,\n            }}\n            onClick={handleColorChange}\n          ></div>\n          {colorPickerVisible && (\n            <HexColorPicker\n              className={s.colorPicker}\n              color={color}\n              onChange={setColor}\n              style={{\n                position: 'absolute',\n                zIndex: 1,\n              }}\n            />\n          )}\n          <textarea\n            placeholder=\"Type comment here...\"\n            className={s.nameTextarea}\n            name=\"name\"\n            title=\"Place for comments\"\n            required\n            value={name}\n            onChange={handleChange}\n          />\n\n          <button type=\"submit\" className={s.commentsAddButton}>\n            Add new\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}